Once lib/shell.rb is available

+ port addon refactorings
+ port deploy refactoring
+ port directory_cache refactoring
+ look at shared modules jdk, jvm, rvm etc.
+ port rust

+ go over all spec changes since branching off, and port them
- port known hosts feature


Later

- re-add service appliance fold
- re-add :announce stage fold
- re-add deprecation warnings
- split up git into smaller classes, check spec coverage, eg download tarball
- split up rvm into smaller classes (split out chruby?), check spec coverage, eg rvm setup_rvm for ruby-head
